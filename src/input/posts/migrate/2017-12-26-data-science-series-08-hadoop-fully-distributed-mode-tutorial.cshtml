Title: "[Data Science 到底是什麼從一個完全外行角度來看][08]Hadoop 改成完全分散模式"
Published: 2017-12-26
Modified: 2017-12-26
Image: /posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb(67).png
Tags: ["hadoop","「data science 到底是什麼從一個完全外行角度來看」","data science"]
RedirectFrom: 2017/12/data-science-series-08-hadoop-fully-distributed-mode-tutorial.html
Series: ["「Data Science 到底是什麼從一個完全外行角度來看」"]
---
<section><figure><a href="https://lh3.googleusercontent.com/-5ZIPrzPqaWQ/WkJSwcrrgqI/AAAAAAAAXSg/cz-miyNn8kEazSI1pROY-wI7jE8njVkbQCHMYCw/s1600-h/image%255B2%255D"><img width="654" height="290" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb(67).png" border="0" class="img-responsive"></a><br><figcaption><span>圖片來源：                     <a href="https://pixabay.com/en/books-spine-colors-pastel-1099067/">https://pixabay.com/en/books-spine-colors-pastel-1099067/</a> 和                     <a href="https://pixabay.com/en/math-blackboard-education-classroom-1547018/">https://pixabay.com/en/math-blackboard-education-classroom-1547018/</a></span></figcaption><br></figure></section><section><p>在上一篇(<a href="http://blog.alantsai.net/2017/12/data-science-series-07-deeper-look-at-yarn-and-hdfs-in-hadoop.html">[07]更深入看看Hadoop裡面的YARN和HDFS</a>)了解了整個jps的process代表的意思之後，在這篇將會延續之前(<a href="http://blog.alantsai.net/2017/12/data-science-series-05-install-and-test-hadoop-part1.html">[05]建立Hadoop環境 -上篇</a>、<a href="http://blog.alantsai.net/2017/12/data-science-series-06-install-and-test-hadoop-part2.html">[06]建立Hadoop環境 -下篇</a>)建立出來<em style="line-height: 1.6; font-size: 15px;">pseudo-distributed mode</em><span style="line-height: 1.6; font-size: 15px;">的hadoop改成             </span><em style="line-height: 1.6; font-size: 15px;">fully-distributed mode</em></p><p>這篇結束之後，除了Master，會建立出一台slave。由於Master裡面也有DataNode和NodeManager，所以總共會有<em>2個</em>DataNode。         </p></section>         <section> <a name="KMContentPageTopID" id="KMContentPageTopID"></a><div id="divKMOutline" style="border-style: groove none; margin: 10px 0px;"><ul style="margin: 0px 0px 0px 20px;"><li><a style="line-height: 1.6; font-size: 15px;" href="#WizKMOutline_1514114580092827" ;="">建立步奏</a><br></li><li><a style="line-height: 1.6; font-size: 15px;" href="#WizKMOutline_1514114580092272" ;="">修改原本的VM變成Master機器</a><br></li><li><a style="line-height: 1.6; font-size: 15px;" href="#WizKMOutline_1514114580092622" ;="">從Master建立Slave</a><br></li><li><a style="line-height: 1.6; font-size: 15px;" href="#WizKMOutline_1514114580092931" ;="">最後設定</a><br></li><li><a style="line-height: 1.6; font-size: 15px;" href="#WizKMOutline_1514114580092732" ;="">重新Format指令</a><br></li><li><a style="line-height: 1.6; font-size: 15px;" href="#WizKMOutline_1514114580092906" ;="">啟動和驗證</a><br></li><li><a style="line-height: 1.6; font-size: 15px;" href="#WizKMOutline_1514114580092308" ;="">執行WordCount</a><br></li><li><a style="line-height: 1.6; font-size: 15px;" href="#WizKMOutline_1514114580092413" ;="">結語</a><br></li></ul></div></section>          <a name="more"></a> <section><h2 id="WizKMOutline_1514114580092827">建立步奏</h2><p>基本上整個的建立步奏可以分為6個部分：             </p><ol><li>修改原本的VM變成Master機器</li><li>從Master建立Slave</li><li>最後設定</li><li>重新Format指令</li><li>啟動和驗證</li><li>執行WordCount</li></ol></section><section><h2 id="WizKMOutline_1514114580092272">修改原本的VM變成Master機器</h2><dl><dt>修改Hostname改成master</dt><dd><p>開啟Terminal（快速鍵<code>Ctrl+Alt+ t</code>）然後輸入：<code>sudo gedit /etc/hosts</code></p><p>在裡面的檔案把<code>ubuntu</code>改成<code>master</code></p><figure><a href="https://lh3.googleusercontent.com/-dtmJ5QWVKB0/WkJSz9ZbWkI/AAAAAAAAXSo/N94Z4mu9jwYREHcWIoqbqL_XA6StHFjEQCHMYCw/s1600-h/image%255B5%255D"><img width="654" height="271" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[1](58).png" border="0" class="img-responsive"></a> <figcaption>調整host</figcaption></figure><div class="bs-callout bs-callout-info">記得透過右上角把整個機器重啟，然後開termianl會發現@@後面是<em><strong>master</strong></em> <figure><a href="https://lh3.googleusercontent.com/-xaSvW-NDM5I/WkJS1wOQvCI/AAAAAAAAXSw/QfjC08fh0JYvp2itK0o0tP7I4n6ZmW4DACHMYCw/s1600-h/image%255B8%255D"><img width="275" height="324" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[2](48).png" border="0" class="img-responsive"></a> <a href="https://lh3.googleusercontent.com/-Mx0mSLhJn0k/WkJS7CUlbMI/AAAAAAAAXS4/jVxj6JTvExcDDHiR6WVf0ZmRK486cjORQCHMYCw/s1600-h/image%255B11%255D"><img width="234" height="102" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[3](45).png" border="0" class="img-responsive"></a> <figcaption>重啟機器和檢查terminal是不是變成master</figcaption></figure></div><div class="bs-callout bs-callout-info">重啟了之後，當輸入指令會需要<em>等一下</em>，因為他會嘗試和master溝通 - master不存在所以要等一下他timeout才會出現                 </div></dd><dt>設定host的ip</dt><dd><p>透過右上角的network資訊找到目前機器的ip，並且用terminal執行：<code>sudo gedit /etc/hosts</code></p><p>在裡面加入：<code>{ip} master</code> - ip是上面找到的ip                 </p><figure><a href="https://lh3.googleusercontent.com/-5BVOL5Sl8bM/WkJS_xeBJyI/AAAAAAAAXTA/kc-qoV8hAFckyIpYt95Yj-qTpba9IRdUACHMYCw/s1600-h/image%255B14%255D"><img width="654" height="494" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[4](46).png" border="0" class="img-responsive"></a> <figcaption>找到ip</figcaption></figure><figure><a href="https://lh3.googleusercontent.com/-c_kww-2gkWs/WkJTEDFgmvI/AAAAAAAAXTI/JNT0Zw3asCsVoBb8zyrLMwU4lz-Ngw3lgCHMYCw/s1600-h/image%255B17%255D"><img width="654" height="249" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[5](31).png" border="0" class="img-responsive"></a> <figcaption>設定master的host ip</figcaption></figure></dd><dt>修改NameNode</dt><dd><p>在terminal執行：<code>gedit /usr/local/hadoop/etc/hadoop/master</code></p><p>在開的檔案，把裡面內容改成<code>master</code></p><figure><a href="https://lh3.googleusercontent.com/-IpWjf-Y2al0/WkJTINw5RLI/AAAAAAAAXTQ/XRRoPfyOu1MfOY8g9U77AMhyYCihOCNWgCHMYCw/s1600-h/image%255B20%255D"><img width="603" height="179" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[6](29).png" border="0" class="img-responsive"></a> <figcaption>改成master</figcaption></figure></dd><dt>修改cor-site.xml</dt><dd><p>在terminal輸入：<code>gedit /usr/local/hadoop/etc/hadoop/core-site.xml</code></p><p>把<em><strong>整個</strong></em><code>configuration</code>內容改成：</p><pre class="brush: xml;"><code class="language-markup line-numbers">    &lt;property&gt;
     &lt;name&gt;fs.default.name&lt;/name&gt;
     &lt;value&gt;hdfs://master:9000&lt;/value&gt;
    &lt;/property&gt;</code></pre><p>這邊把localhost改成了master</p></dd><dt>修改hdfs-site.xml</dt><dd><p>用terminal開啟：<code>gedit /usr/local/hadoop/etc/hadoop/hdfs-site.xml</code></p><p>在<code>Configuration</code>最後一筆的<em><strong>前面加上</strong></em>：                     </p><pre class="brush: xml;"><code class="language-markup line-numbers">&lt;property&gt;
    &lt;name&gt;dfs.permissions&lt;/name&gt;
    &lt;value&gt;false&lt;/value&gt;
&lt;/property&gt;
</code></pre><figure><a href="https://lh3.googleusercontent.com/-kfUp-LTg3GY/WkJTLeL_6-I/AAAAAAAAXTY/qO7ysOHLOgUkjOxN_I95mn9im8tqzNtFwCHMYCw/s1600-h/image%255B23%255D"><img width="654" height="534" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[7](24).png" border="0" class="img-responsive"></a> <figcaption>修改畫面</figcaption></figure></dd><dt>修改 mapred-site.xml</dt><dd><p>在terminal輸入：<code>gedit /usr/local/hadoop/etc/hadoop/mapred-site.xml</code></p><p><em>增加</em>以下設定Configuration：</p><pre class="brush: xml;"><code class="language-markup line-numbers">&lt;property&gt;
        &lt;name&gt;mapred.job.tracker&lt;/name&gt;
        &lt;value&gt;master:54311&lt;/value&gt;
    &lt;/property&gt;
</code></pre><figure><a href="https://lh3.googleusercontent.com/-Eg85ZBeCxA4/WkJTPXUhZxI/AAAAAAAAXTg/v4DSStu4rL4t04ghKKl_c1lv2lLKnBczACHMYCw/s1600-h/image%255B26%255D"><img width="654" height="579" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[8](22).png" border="0" class="img-responsive"></a> <figcaption>設定畫面</figcaption></figure></dd><dt>修改yarn-site.xml</dt><dd><p>在terminal輸入：<code>gedit /usr/local/hadoop/etc/hadoop/yarn-site.xml</code></p><p><em>增加</em>以下設定到Configuration:</p><pre class="brush: xml;"><code class="language-markup line-numbers">&lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt;
        &lt;value&gt;master:8025&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt;
        &lt;value&gt;master:8030&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;
        &lt;value&gt;master:8050&lt;/value&gt;
    &lt;/property&gt;
</code></pre><figure><a href="https://lh3.googleusercontent.com/-XBbuE0gU2GA/WkJTU5JUAVI/AAAAAAAAXTo/g_4CcZOfJzApjFt6WmV3sa8WHu0mIOFmgCHMYCw/s1600-h/image%255B29%255D"><img width="650" height="594" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[9](11).png" border="0" class="img-responsive"></a> <figcaption>增加yarn site設定</figcaption></figure></dd><dt>slaves檔案設定</dt><dd><p>用terminal輸入：<code>gedit /usr/local/hadoop/etc/hadoop/slaves</code></p><p>改成以下設定：                 </p><pre class="brush: plain;"><code class="language-none line-numbers">    master
    slave1
</code></pre></dd></dl></section><section><h2 id="WizKMOutline_1514114580092622">從Master建立Slave</h2><p>先從設定找到Master VM的設定位置，並且複製一份出來         </p><figure><a href="https://lh3.googleusercontent.com/-EtKL6jS8VAg/WkJTa4aMEGI/AAAAAAAAXTw/2OGqSoO4liQsT6RNpI-ll3zzfNoVCNsMACHMYCw/s1600-h/image%255B32%255D"><img width="654" height="307" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[10](9).png" border="0" class="img-responsive"></a><br><a href="https://lh3.googleusercontent.com/-clvz72QaEFs/WkJTjuuml3I/AAAAAAAAXT4/vyuRU8Pi9h4_XRWKTHLqpc1APUVCdyYJgCHMYCw/s1600-h/image%255B35%255D"><img width="654" height="439" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[11](13).png" border="0" class="img-responsive"></a><br><figcaption>透過設定找到VM檔案位置</figcaption></figure><p>用開啟VM的方式打開<em><strong>複製</strong></em>出來的VM             </p><figure><a href="https://lh3.googleusercontent.com/-HVcCZvvJdgw/WkJTuG0hJ7I/AAAAAAAAXUA/xBaYQbHOXeQA1d8TX3oWmzUMns-ZaX0KgCHMYCw/s1600-h/image%255B38%255D"><img width="654" height="370" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[12](15).png" border="0" class="img-responsive"></a><br><figcaption>開啟VM並且改成hadoop-slave</figcaption></figure><p>對開啟的VM做出：             </p><ol><li>選擇剛剛開啟的VM</li><li>選擇設定</li><li>切換<code>Options</code>的頁簽</li><li>修改VM名稱為hadoop-slave</li><li>按下 <code>ok</code></li></ol><figure><a href="https://lh3.googleusercontent.com/-h4NtixYgLbM/WkJTxlGstLI/AAAAAAAAXUI/Wurdb6sq58cahypxijuDmRjqXinqr3_TACHMYCw/s1600-h/image%255B41%255D"><img width="654" height="357" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[13](12).png" border="0" class="img-responsive"></a><br><figcaption>設定VM名稱</figcaption></figure><p>把slave那台啟動起來，當出現選擇的時候，記得選擇<em><strong>I Copied It</strong></em></p><figure><a href="https://lh3.googleusercontent.com/-9UspAMrBGSM/WkJTztn5BwI/AAAAAAAAXUQ/xm4-eUK_A6MRVdK0_KEMhVTf4FX4qDohQCHMYCw/s1600-h/image%255B44%255D"><img width="654" height="475" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[14](7).png" border="0" class="img-responsive"></a><br><figcaption>選擇I Copied It</figcaption></figure><p>最後把兩個VM都啟動起來，可以再上面的title看到那一台是master和那台是slave             </p><figure><a href="https://lh3.googleusercontent.com/-jbzVY5PTph8/WkJT28qJC3I/AAAAAAAAXUY/89SnoWPofR8D5-iJ3tJlK0fmAkxR492CwCHMYCw/s1600-h/image%255B47%255D"><img width="654" height="336" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[15](6).png" border="0" class="img-responsive"></a><br><figcaption>兩台機器啟動起來</figcaption></figure></section><section><h2 id="WizKMOutline_1514114580092931">最後設定</h2><dl><dt>修改slave那台的hostname改成slave1</dt><dd><p>開啟Terminal（快速鍵                 <code>Ctrl+Alt+ t</code>）然後輸入：                 <code>sudo gedit /etc/hosts</code></p><p>在裡面的檔案把                 <code>master</code>改成                 <code>slave1</code></p><figure><a href="https://lh3.googleusercontent.com/-KBOKFk4LxhE/WkJT62jXFnI/AAAAAAAAXUg/B3CFpgJ9s9QipRsiQ-oJjQ9qHGKW4QBfgCHMYCw/s1600-h/image%255B50%255D"><img width="413" height="174" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[16](4).png" border="0" class="img-responsive"></a> <figcaption>調整host</figcaption></figure><div class="bs-callout bs-callout-info">記得一樣要重啟機器才會有作用             </div></dd><dt>設定slave的ip</dt><dd><p>透過右上角的network資訊找到<em>slave</em>機器的ip，並且在<em><strong>master和slave</strong></em>的機器terminal執行：<code>sudo gedit /etc/hosts</code></p><p>在裡面加入：<code>{ip} slave1</code> - ip是上面找到的ip                         </p><figure><a href="https://lh3.googleusercontent.com/-Jm3sT99wDMc/WkJUAGq0W-I/AAAAAAAAXUo/_XEQrJVQJ6we1glsPedR4wa3qkueBX_mgCHMYCw/s1600-h/image%255B53%255D"><img width="654" height="300" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[17](5).png" border="0" class="img-responsive"></a> <figcaption>兩台都要修改</figcaption></figure></dd><dt>確認master和slave 1可以互動</dt><dd><p>分別從<em>master</em>那台的terminal呼叫：<code>ping slave1</code>和<em>slave</em>那台機器的terminal呼叫：<code>ping master</code></p><p>確保兩台之間溝通沒有問題</p><figure><a href="https://lh3.googleusercontent.com/-0BiBsQkQULQ/WkJUEVZFhTI/AAAAAAAAXUw/qrBjaTL--zgV2ZuHx0I6bNE2efDXNBZuQCHMYCw/s1600-h/image%255B56%255D"><img width="654" height="172" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[18](3).png" border="0" class="img-responsive"></a> <figcaption>兩台互相ping</figcaption></figure></dd><dt>在master那台設定slave的sh key</dt><dd><p>在master的機器把slave ssh key建立出來然後做出測試，在terminal執行：</p><pre class="brush: plain;"><code class="language-none line-numbers">cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
    scp -r ~/.ssh slave1:~/
    ssh slave1
    exit
</code></pre><figure><a href="https://lh3.googleusercontent.com/-i5VZDexm6R0/WkJUGH-LZTI/AAAAAAAAXU4/ofGAef-y3Z0rbv25CJtv7pd_SoJqU3NOACHMYCw/s1600-h/image%255B59%255D"><img width="654" height="403" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[19](4).png" border="0" class="img-responsive"></a> <figcaption>測試ssh畫面</figcaption></figure></dd></dl></section><section><h2 id="WizKMOutline_1514114580092732">重新Format指令</h2><dl><dt>建立DataNode和NameNode資料夾</dt><dd><p>在<em>master</em>輸入以下來重建資料夾：</p><pre class="brush: plain;"><code class="language-none line-numbers">sudo rm -rf /usr/local/hadoop/hadoop_data/hdfs
mkdir -p /usr/local/hadoop/hadoop_data/hdfs/namenode
mkdir -p /usr/local/hadoop/hadoop_data/hdfs/datanode
sudo chown -R hduser:hduser /usr/local/hadoop
</code></pre><p>在<em>slave</em>輸入以下來重建對應資料夾：</p><pre class="brush: plain;"><code class="language-none line-numbers">sudo rm -rf /usr/local/hadoop/hadoop_data/hdfs
mkdir -p /usr/local/hadoop/hadoop_data/hdfs/datanode
sudo chown -R hduser:hduser /usr/local/hadoop
</code></pre></dd><dt>格式化hdfs</dt><p>在<em>master</em>輸入以下來format hdfs：</p><pre class="brush: plain;"><code class="language-none line-numbers">hadoop namenode -format
hadoop datanode -format
</code></pre><p>在<em>slave</em>輸入以下來format hdfs：</p><pre class="brush: plain;"><code class="language-none line-numbers">hadoop datanode -format
</code></pre></dl></section><section><h2 id="WizKMOutline_1514114580092906">啟動和驗證</h2><p>在master呼叫<code>start-all.sh</code>(這邊偷懶了，其實比較建議呼叫start-yarn和start-hdfs)來啟動整個hadoop。        </p><p>啟動了之後可以再兩台的jps看到服務都出現：            </p><figure><a href="https://lh3.googleusercontent.com/-C3DIifvOQHg/WkJUKP6W7rI/AAAAAAAAXVA/OWIvnQEQmX4PfXGAhfGclk4_y3kQ1BVxgCHMYCw/s1600-h/image%255B62%255D"><img width="654" height="283" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[20](3).png" border="0" class="img-responsive"></a><br><figcaption>master同時也是slave</figcaption></figure><p>檢查ResourceManager，在Firefox輸入：http://localhost:8088            </p><figure><a href="https://lh3.googleusercontent.com/-8p9r0JwwhIg/WkJUN9XvHAI/AAAAAAAAXVM/ZrcH4oe6cCgMHxbPPx408d1tWEMk6y0cgCHMYCw/s1600-h/image%255B65%255D"><img width="654" height="476" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[21](3).png" border="0" class="img-responsive"></a><br><figcaption>可以看到有兩個Node</figcaption></figure><p>檢查DataNode，在Firefox輸入：http://localohost:50070            </p><figure><a href="https://lh3.googleusercontent.com/-kl-3zbf1GoE/WkJUQ2hHFYI/AAAAAAAAXVU/i73nJgztvQMiF3rY-tb0GUsZgA-BVcABwCHMYCw/s1600-h/image%255B68%255D"><img width="654" height="810" title="image" style="margin: 0px; display: inline; background-image: none;" alt="image" src="/posts/migrate/2017-12-26-data-science-series-08-hadoop-fully-distributed-mode-tutorial_Asset/image_thumb[22](2).png" border="0" class="img-responsive"></a><br><figcaption>可以看到有兩個DataNode</figcaption></figure></section><section><h2 id="WizKMOutline_1514114580092308">執行WordCount</h2><p>執行方式和之前一模一樣：</p><pre class="brush: plain;"><code class="language-none line-numbers">cd ~/Downloads
hadoop fs -mkdir -p /user/hduser/input
hadoop fs -copyFromLocal jane_austen.txt /user/hduser/input
</code></pre><p>執行WordCount程式：<code>hadoop jar wordcount2.jar WordCount /user/hduser/input/jane_austen.txt /user/hduser/output</code></p><p>檢查執行結果：<code>hadoop fs -cat /user/hduser/output/part-r-00000</code></p><div class="bs-callout bs-callout-warning">如果要在執行一次計算，需要先把hdfs裡面的output<em>砍掉</em>，要不然會執行不了。指令是：<code>hadoop fs -rm -r /user/hduser/output</code></div><div class="bs-callout bs-callout-warning">如果執行有問題，或者run不起來，可以試試重開機，然後從<em>測試Hadoop</em>裡面的<em>格式化HDFS</em>開始重新做一次。   </div></section><section><h2 id="WizKMOutline_1514114580092413">結語</h2><p>在這篇，透過之前建立的VM轉換成為Master，並且在從這個Master複製出來變成slave。    </p><p>可以想象，如果要串聯多台電腦可以用這種方式達到分散式運算和分散式檔案儲存。只不過這邊用VM來模擬這個情況。</p><p>基本上，到目前為止對於整個Hadoop應該已經有個比較完整的感覺，並且了解如何建立一個測試來玩玩看。</p><p>不過有一個部分還沒有介紹，就是MapReduce裡面執行的WordCount程式是怎麼建立出來。</p><p>在下一篇將會介紹MapReduce執行的概念和WordCout是怎麼寫出來。</p></section>    <section>     <div class="wlWriterEditableSmartContent" id="scid:77ECF5F8-D252-44F5-B4EB-D463C5396A79:10e0057c-84bf-4737-891e-81a0daf24ed1" style="margin: 0px; padding: 0px; float: none; display: inline;">標籤: <a href="/tags/%e3%80%8cData+Science+%e5%88%b0%e5%ba%95%e6%98%af%e4%bb%80%e9%ba%bc%e5%be%9e%e4%b8%80%e5%80%8b%e5%ae%8c%e5%85%a8%e5%a4%96%e8%a1%8c%e8%a7%92%e5%ba%a6%e4%be%86%e7%9c%8b%e3%80%8d" rel="tag">「Data Science 到底是什麼從一個完全外行角度來看」</a>,<a href="/tags/data+science" rel="tag">data science</a>,<a href="/tags/hadoop" rel="tag">hadoop</a></div></section>